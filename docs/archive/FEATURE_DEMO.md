# 저장 안 된 변경사항 경고 기능 - 시연 가이드

## 기능 테스트 방법

### 1. 변경사항 추적 테스트
1. 관리자 페이지 접속: `/admin/new`
2. 아무 섹션 선택 (예: "메인 히어로")
3. 입력 필드 하나 수정
4. **결과**: 페이지 하단에 노란색 경고 배너 표시
   ```
   ⚠️ 저장되지 않은 변경사항이 있습니다
   ```
5. **결과**: 저장 버튼에 주황색 링과 맥박 애니메이션 표시
6. **결과**: 저장 버튼 텍스트에 "(변경됨)" 추가 표시

### 2. 브라우저 종료 시 경고 테스트
1. 변경사항 있는 상태에서
2. 브라우저 탭 닫기 시도 또는 새로고침 시도 (Cmd+W 또는 Cmd+R)
3. **결과**: 브라우저 기본 경고 다이얼로그 표시
   ```
   변경사항을 저장하지 않았습니다. 페이지를 나가시겠습니까?
   ```
4. "취소" 선택 시 페이지 유지
5. "나가기" 선택 시 페이지 떠남

### 3. 섹션 전환 시 경고 테스트
1. 현재 섹션에서 변경사항 만들기
2. 다른 섹션 탭 클릭 (예: "헤더" → "주요 특징")
3. **결과**: 확인 다이얼로그 표시
   ```
   저장하지 않은 변경사항이 있습니다. 계속하시겠습니까?
   ```
4. "취소" 선택 시 현재 섹션 유지
5. "확인" 선택 시 새 섹션으로 이동 (변경사항 손실)

### 4. 저장 후 플래그 리셋 테스트
1. 변경사항 만들기
2. 저장 버튼 클릭 (또는 Cmd+S)
3. **결과**: 저장 성공 메시지 표시
4. **결과**: 노란색 경고 배너 사라짐
5. **결과**: 저장 버튼 애니메이션 중지
6. **결과**: "(변경됨)" 텍스트 사라짐
7. 브라우저 닫기 시도해도 경고 표시 안 됨

### 5. 데이터 로드 시 플래그 리셋 테스트
1. 변경사항 만들기 (저장 안 함)
2. 확인 다이얼로그 수락하고 다른 섹션으로 이동
3. **결과**: 새 섹션 데이터 로드 후 경고 배너 사라짐
4. **결과**: 이전 섹션의 변경사항은 손실됨 (의도된 동작)

## 시각적 효과

### 경고 배너
```
┌─────────────────────────────────────────────────┐
│  ⚠️  저장되지 않은 변경사항이 있습니다             │
└─────────────────────────────────────────────────┘
배경색: 노란색 (#FEF3C7)
테두리: 주황색 (#F59E0B)
```

### 저장 버튼 효과
```
평소 상태:
┌─────────────┐
│ 💾 저장하기  │
└─────────────┘

변경사항 있을 때:
┌─────────────────────┐  ← 주황색 링 애니메이션
│ 💾 저장하기 (변경됨) │  ← 맥박 효과
└─────────────────────┘
```

## 기술 세부사항

### 상태 관리
- State: `hasUnsavedChanges: boolean`
- 초기값: `false`
- 업데이트 시점:
  - `true`: 모든 onChange 이벤트
  - `false`: 저장 성공, 데이터 로드 완료

### 이벤트 리스너
- `beforeunload`: 브라우저/탭 종료 시
- `confirm()`: 섹션 전환 시
- 54개의 onChange 핸들러에 플래그 설정 로직 추가

### 성능 최적화
- `useEffect` 의존성 배열에 `hasUnsavedChanges` 포함
- 이벤트 리스너 cleanup 함수로 메모리 누수 방지
- 조건부 렌더링으로 불필요한 DOM 업데이트 최소화

## 브라우저 호환성
- ✅ Chrome/Edge
- ✅ Firefox
- ✅ Safari
- ✅ Opera
- ⚠️ IE (지원 안 함)

## 알려진 제한사항
1. 브라우저 기본 경고 메시지는 커스터마이징 불가 (보안상 이유)
2. 모바일 브라우저에서는 beforeunload 이벤트가 일부 제한될 수 있음
3. 변경사항의 "diff" 추적은 하지 않음 (단순 boolean 플래그)

## 추가 개선 제안
1. **자동 저장**: 30초마다 자동으로 저장
2. **변경 내역 표시**: 어떤 필드가 변경되었는지 표시
3. **실행 취소**: Ctrl+Z로 변경사항 되돌리기
4. **변경사항 미리보기**: 저장 전 변경사항 확인
5. **Draft 저장**: 임시 저장 기능 추가
